<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="MaskRate_Mapper" >
  <resultMap id="BaseResultMap" type="com.e9cloud.mybatis.domain.MaskRate" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="feeid" property="feeid" jdbcType="VARCHAR" />
    <result column="start_date" property="startDate" jdbcType="DATE" />
    <result column="end_date" property="endDate" jdbcType="DATE" />
    <result column="forever" property="forever" jdbcType="BIT" />
    <result column="fee_mode" property="feeMode" jdbcType="VARCHAR" />
    <result column="maskA" property="maska" jdbcType="DECIMAL" />
    <result column="maskA_discount" property="maskaDiscount" jdbcType="INTEGER" />
    <result column="maskB" property="maskb" jdbcType="DECIMAL" />
    <result column="maskB_discount" property="maskbDiscount" jdbcType="INTEGER" />
    <result column="recording" property="recording" jdbcType="DECIMAL" />
    <result column="recording_discount" property="recordingDiscount" jdbcType="INTEGER" />
    <result column="callback" property="callback" jdbcType="DECIMAL" />
    <result column="callback_discount" property="callbackDiscount" jdbcType="INTEGER" />
    <result column="recording_callback" property="recordingCallback" jdbcType="DECIMAL" />
    <result column="recording_callback_discount" property="recordingCallbackDiscount" jdbcType="INTEGER" />
    <result column="rent" property="rent" jdbcType="DECIMAL" />
    <result column="addtime" property="addtime" jdbcType="TIMESTAMP" />
  </resultMap>

  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    feeid, start_date, end_date, forever, fee_mode, maskA, maskA_discount, maskB, maskB_discount, 
    recording, recording_discount, callback, callback_discount, recording_callback, recording_callback_discount, 
    rent, addtime
  </sql>

  <select id="selectMaskRateForFeeid" resultMap="BaseResultMap" parameterType="java.lang.String" >
    SELECT
	DD.maskA ,ifnull(CC.maskA_discount,DD.maskA_discount) maskA_discount,
  DD.maskB ,ifnull(CC.maskB_discount,DD.maskB_discount) maskB_discount ,
  DD.recording, ifnull(CC.recording_discount,DD.recording_discount) recording_discount,
  DD.callback, ifnull(CC.callback_discount,DD.callback_discount) callback_discount,
  DD.recording_callback, ifnull(CC.recording_callback_discount,DD.recording_callback_discount) recording_callback_discount,
  ifnull(CC.rent,DD.rent) rent
  FROM
	(SELECT AA.maskA, AA.maskA_discount ,AA.maskB ,AA.maskB_discount ,AA.recording ,AA.recording_discount ,AA.callback ,AA.callback_discount , AA.recording_callback ,AA.recording_callback_discount,AA.rent, 'e9cloud' e9cloud FROM rms_mask_rate AA WHERE AA.feeid = #{feeid,jdbcType=VARCHAR}) CC
	RIGHT JOIN
	(SELECT BB.maskA, BB.maskA_discount ,BB.maskB ,BB.maskB_discount ,BB.recording ,BB.recording_discount ,BB.callback ,BB.callback_discount , BB.recording_callback ,BB.recording_callback_discount,BB.rent, 'e9cloud' e9cloud FROM rms_mask_rate BB WHERE BB.feeid = '0') DD
	ON CC.e9cloud = DD.e9cloud;
  </select>

  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
    select
    <include refid="Base_Column_List" />
    from rms_mask_rate
    where feeid = #{feeid,jdbcType=VARCHAR}
  </select>

  <select id="countCc" resultType="String" parameterType="java.lang.String" >
    select COUNT(*) from tb_business_type  where status = '00' and bus_type = '01' and sid = #{sid,jdbcType=VARCHAR}
  </select>

  <select id="countSipPhone" resultType="String" parameterType="java.lang.String" >
    select COUNT(*) from tb_business_type  where status = '00' and bus_type = '05' and sid = #{sid,jdbcType=VARCHAR}
  </select>

  <select id="countEcc" resultType="String" parameterType="java.lang.String" >
    select COUNT(*) from tb_business_type  where status = '00' and bus_type = '06' and sid = #{sid,jdbcType=VARCHAR}
  </select>

  <select id="countAxb" resultType="String" parameterType="java.lang.String" >
    select COUNT(*) from tb_business_type  where status = '00' and bus_type = '07' and sid = #{sid,jdbcType=VARCHAR}
  </select>

  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from rms_mask_rate
    where feeid = #{feeid,jdbcType=VARCHAR}
  </delete>

  <insert id="insert" parameterType="com.e9cloud.mybatis.domain.MaskRate" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into rms_mask_rate (feeid, start_date, end_date, 
      forever, fee_mode, maskA, 
      maskA_discount, maskB, maskB_discount, 
      recording, recording_discount, callback, 
      callback_discount, recording_callback, recording_callback_discount, 
      rent, addtime)
    values (#{feeid,jdbcType=VARCHAR}, #{startDate,jdbcType=DATE}, #{endDate,jdbcType=DATE}, 
      #{forever,jdbcType=BIT}, #{feeMode,jdbcType=VARCHAR}, #{maska,jdbcType=DECIMAL}, 
      #{maskaDiscount,jdbcType=INTEGER}, #{maskb,jdbcType=DECIMAL}, #{maskbDiscount,jdbcType=INTEGER}, 
      #{recording,jdbcType=DECIMAL}, #{recordingDiscount,jdbcType=INTEGER}, #{callback,jdbcType=DECIMAL}, 
      #{callbackDiscount,jdbcType=INTEGER}, #{recordingCallback,jdbcType=DECIMAL}, #{recordingCallbackDiscount,jdbcType=INTEGER}, 
      #{rent,jdbcType=DECIMAL}, #{addtime,jdbcType=TIMESTAMP})
  </insert>
  <insert id="insertSelective" parameterType="com.e9cloud.mybatis.domain.MaskRate" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into rms_mask_rate
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="feeid != null" >
        feeid,
      </if>
      <if test="startDate != null" >
        start_date,
      </if>
      <if test="endDate != null" >
        end_date,
      </if>
      <if test="forever != null" >
        forever,
      </if>
      <if test="feeMode != null" >
        fee_mode,
      </if>
      <if test="maska != null" >
        maskA,
      </if>
      <if test="maskaDiscount != null" >
        maskA_discount,
      </if>
      <if test="maskb != null" >
        maskB,
      </if>
      <if test="maskbDiscount != null" >
        maskB_discount,
      </if>
      <if test="recording != null" >
        recording,
      </if>
      <if test="recordingDiscount != null" >
        recording_discount,
      </if>
      <if test="callback != null" >
        callback,
      </if>
      <if test="callbackDiscount != null" >
        callback_discount,
      </if>
      <if test="recordingCallback != null" >
        recording_callback,
      </if>
      <if test="recordingCallbackDiscount != null" >
        recording_callback_discount,
      </if>
      <if test="rent != null" >
        rent,
      </if>
      <if test="addtime != null" >
        addtime,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="feeid != null" >
        #{feeid,jdbcType=VARCHAR},
      </if>
      <if test="startDate != null" >
        #{startDate,jdbcType=DATE},
      </if>
      <if test="endDate != null" >
        #{endDate,jdbcType=DATE},
      </if>
      <if test="forever != null" >
        #{forever,jdbcType=BIT},
      </if>
      <if test="feeMode != null" >
        #{feeMode,jdbcType=VARCHAR},
      </if>
      <if test="maska != null" >
        #{maska,jdbcType=DECIMAL},
      </if>
      <if test="maskaDiscount != null" >
        #{maskaDiscount,jdbcType=INTEGER},
      </if>
      <if test="maskb != null" >
        #{maskb,jdbcType=DECIMAL},
      </if>
      <if test="maskbDiscount != null" >
        #{maskbDiscount,jdbcType=INTEGER},
      </if>
      <if test="recording != null" >
        #{recording,jdbcType=DECIMAL},
      </if>
      <if test="recordingDiscount != null" >
        #{recordingDiscount,jdbcType=INTEGER},
      </if>
      <if test="callback != null" >
        #{callback,jdbcType=DECIMAL},
      </if>
      <if test="callbackDiscount != null" >
        #{callbackDiscount,jdbcType=INTEGER},
      </if>
      <if test="recordingCallback != null" >
        #{recordingCallback,jdbcType=DECIMAL},
      </if>
      <if test="recordingCallbackDiscount != null" >
        #{recordingCallbackDiscount,jdbcType=INTEGER},
      </if>
      <if test="rent != null" >
        #{rent,jdbcType=DECIMAL},
      </if>
      <if test="addtime != null" >
        #{addtime,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>

  <update id="updateByPrimaryKeySelective" parameterType="com.e9cloud.mybatis.domain.MaskRate" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update rms_mask_rate
    <set >
      <if test="startDate != null" >
        start_date = #{startDate,jdbcType=DATE},
      </if>
      <if test="endDate != null" >
        end_date = #{endDate,jdbcType=DATE},
      </if>
      <if test="forever != null" >
        forever = #{forever,jdbcType=BIT},
      </if>
      <if test="feeMode != null" >
        fee_mode = #{feeMode,jdbcType=VARCHAR},
      </if>
      <if test="maska != null" >
        maskA = #{maska,jdbcType=DECIMAL},
      </if>
      <if test="maskaDiscount != null" >
        maskA_discount = #{maskaDiscount,jdbcType=INTEGER},
      </if>
      <if test="maskb != null" >
        maskB = #{maskb,jdbcType=DECIMAL},
      </if>
      <if test="maskbDiscount != null" >
        maskB_discount = #{maskbDiscount,jdbcType=INTEGER},
      </if>
      <if test="recording != null" >
        recording = #{recording,jdbcType=DECIMAL},
      </if>
      <if test="recordingDiscount != null" >
        recording_discount = #{recordingDiscount,jdbcType=INTEGER},
      </if>
      <if test="callback != null" >
        callback = #{callback,jdbcType=DECIMAL},
      </if>
      <if test="callbackDiscount != null" >
        callback_discount = #{callbackDiscount,jdbcType=INTEGER},
      </if>
      <if test="recordingCallback != null" >
        recording_callback = #{recordingCallback,jdbcType=DECIMAL},
      </if>
      <if test="recordingCallbackDiscount != null" >
        recording_callback_discount = #{recordingCallbackDiscount,jdbcType=INTEGER},
      </if>
      <if test="rent != null" >
        rent = #{rent,jdbcType=DECIMAL},
      </if>
      <if test="addtime != null" >
        addtime = #{addtime,jdbcType=TIMESTAMP},
      </if>
    </set>
    where feeid = #{feeid,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.e9cloud.mybatis.domain.MaskRate" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update rms_mask_rate
    set start_date = #{startDate,jdbcType=DATE},
      end_date = #{endDate,jdbcType=DATE},
      forever = #{forever,jdbcType=BIT},
      fee_mode = #{feeMode,jdbcType=VARCHAR},
      maskA = #{maska,jdbcType=DECIMAL},
      maskA_discount = #{maskaDiscount,jdbcType=INTEGER},
      maskB = #{maskb,jdbcType=DECIMAL},
      maskB_discount = #{maskbDiscount,jdbcType=INTEGER},
      recording = #{recording,jdbcType=DECIMAL},
      recording_discount = #{recordingDiscount,jdbcType=INTEGER},
      callback = #{callback,jdbcType=DECIMAL},
      callback_discount = #{callbackDiscount,jdbcType=INTEGER},
      recording_callback = #{recordingCallback,jdbcType=DECIMAL},
      recording_callback_discount = #{recordingCallbackDiscount,jdbcType=INTEGER},
      rent = #{rent,jdbcType=DECIMAL},
      addtime = #{addtime,jdbcType=TIMESTAMP}
    where feeid = #{feeid,jdbcType=VARCHAR}
  </update>
</mapper>